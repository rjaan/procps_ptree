language: c

compiler: gcc

cache: ccache

os: linux

dist: boinic

#The COVERITY_SCAN_BRANCH environment variable will be set to 1 when the Coverity Scan addon is in operation.
script: if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then ./configure && make ; fi

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "i0MDRWwvLiGOFv6C+WX+PcskJ5qUwPTidVimDEKV5g4rBQKw17ugm/HMIXPUcN4L/cVuY+MXo4xf7EmeJeu/W6x4vvtwX8vQS6VFGakplLfiM0KV5aCevtiJy/KYXL63Oz7rzATKJYDhWfaeEG0LsX6eP2YcfAwOndDjFutcT9SZxNaS8kKZ/6vwIJtBYbvfGyvI8/iKtI9XyJRdHpk3CpAMGz1eBdUSq/Ui7H6L3Jg0ysZz4GAC3s/eoyPihUcnmvd7krHMx3eZpbBrriXtsJ2EXINUgU7WE7Tol/xl7Tw8LXElKZrzf7NNQWLy8kp97X0fLbmhRXcRPDU1ab113wnaQnD3cUwZS/2BrUO4gZ2r0wOvmTfeWExuND0OMg0R4LrF5YTXZFtswbruwJMrtZf6ovrAZsJLUl+rJJ19DiL+1zKZSmX43v7K+zrdZ3s6Qx5+L6C7zNKZIVLdalzfk7TdsYX+4arlw2AMhTcXT2a07Y/1cShqwrD9YvlSIxVqd9pRWo3nebi5RJATVGTdLWR09emzlWz4CGpUzHLTigKCrpqmG6cHpsszwoJ9kMthTL/rCZzYq7uAAUnpacYVgGXzNO+Uo6DT1H2M+dWa/XbU/0+5ZAlKmApv4KKy9pva3rIkt2LI5eUquEDMxZnVhWAPjVPvxfOIRfgWRc64zS0="

before_install:
  - sudo apt-get -y install libprocps-dev
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
    apt:
       update: true
    coverity_scan:
       project:
         name: "rjaan/procps_ptree"
         description: "procps_ptree - shows inforamtion of executed process and task"
       notification_email: rjaan@yandex.ru
       build_command_prepend: "./configure"
       build_command: "make"
       branch_pattern: coverity_scan

#eof


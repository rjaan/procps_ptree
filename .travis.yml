language: c

compiler: gcc

cache: ccache

os: linux

dist: boinic

#The COVERITY_SCAN_BRANCH environment variable will be set to 1 when the Coverity Scan addon is in operation.
script: if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then ./configure && make ; fi

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "Lyvc9XujQgU1fINffD6e9OnBJE6cOeDSMQqvVYc9e3jjFfDuYeGHBjF5ASQxJmS7jm3OKv82jIxKyCV1U2lq98WcCDAS+O76EZpO1zaV5B18X3T1L9qabCsOTSP9BrBCgeoO3hYC6nRdZpuDpYhk68QUo3YxLD4c2aTKKio+897oOlN3ZwyUbaG7E14W78r9qrGiCgcoH3ThPExcsSiLQ2irmE13I/Gas67yJ/Jzc67NtlqnkE4MSnXb9ilDwVYDr03qXe6Ak+s1dyWquwEWhvL4utyuEWWDVvk7UWYiFWys50QvuHnW5KEHGR43xX0f7IGgOtLIKI8EWxHtoQALb1K+iGHEgSKKT5/zbUMIyG3y34yeCgPEO+U1wf8NkPwnbH3csMc8YX7mKOSIvZy33rV2AlPDysBbn7A0fIeKnqjZCE5XuCCewaoqvg8ayO4CiSGZjk48urj0EasRjFLZ9GuHCubSgITo2QZ7x0+mjAoTmmRvq8BO1HMNfR3Ec0lN56bVwz9cZ00lykAb2gdbLp3dtMMTC4atePZYu75T1v64s1zWGhBsGRQEEgz7fDX3gkAq3xIALdr2W8GaBYZVsZj+4kDe4sefZ+j2zCBuZM9Vzq9tViKjbimh/AFxYyLZHx6+1YSU2REhJ7pRjFoTAnAKNcmHNodRIhCx7T2CpI0="

before_install:
  - sudo apt-get -y install libprocps-dev
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
    apt:
       update: true
    coverity_scan:
       project:
         name: "rjaan/procps_ptree"
         description: "procps_ptree - shows inforamtion of executed process and task"
       notification_email: rjaan@yandex.ru
       build_command_prepend: "./configure"
       build_command: "make"
       branch_pattern: coverity_scan

#eof


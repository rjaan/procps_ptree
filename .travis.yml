language: c

compiler: gcc

cache: ccache

os: linux

dist: boinic

#The COVERITY_SCAN_BRANCH environment variable will be set to 1 when the Coverity Scan addon is in operation.
script: if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then ./configure && make ; fi

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "JkF8i2mEL1CCbHDrTcxLRPuhI9ukH8VIAh6+hYBTzRXqdCUHCOJRLWufwI3o+1Gq0U8qYNvcuKqNW3dZ359d/xHZWMgP2wO0X9NttnXDGowb0zxWHapiUlJmCAJRKZoyVAnllsFmuq2H5uj0A7KwFqW8G6DDIfUxR09o1J7n9FSyl+v1ILQQnsuc0eVJZJtVr+jN5BZzVT0+fihqG8Per91jvStCbjGBjI+6O8s8Adiu8Po46PBu1z8NTYoB0RC6a8ETgnO7xWpeXHWNkGuwXstDHbKO0Y2f7wFfCcRbC5UqksDYwIpQviAIn/pzsAHAKqhAD0np/QdBjOVEatSMIpX3QP1lewKOAkI+a/l1RZIPYXopEWB79emhG+0iBE9tvZN8+zzS/ijZxImwRiEfxgqdQ/J0Bz79OT9gjbWxF3RJoaFJTysen4PsgZAVdOpwUzAnyfOQ1wuodoE6hNZoRJ3ctZsMmGJ1xoNNFiy89UKm9fIzom3Awtq0VuPU9mCuSuSmhGpIa0UnvlwAP6/Hr3LAlqZ9LeX8xJfy3XEH8zdiKztVJOYd3zkiOivWMt+liFvPAxs2P3OcUuWpMutKNiRxn33HUTONVIOvTyDnayVB9O/0YdE38wzMcWEmwMwHl5w5PeJg+ZG1PU5hPxCdHaVLbaySj12uAJ9+7s4xyGk="

before_install:
  - sudo apt-get -y install libprocps-dev
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
    apt:
       update: true
    coverity_scan:
       project:
         name: "rjaan/procps_ptree"
         description: "procps_ptree - shows inforamtion of executed process and task"
       notification_email: rjaan@yandex.ru
       build_command_prepend: "./configure"
       build_command: "make"
       branch_pattern: procps_ptree_1.4

#eof

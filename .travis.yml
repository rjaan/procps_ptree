language: c

compiler: gcc

cache: ccache

os: linux

dist: boinic

#The COVERITY_SCAN_BRANCH environment variable will be set to 1 when the Coverity Scan addon is in operation.
# script: if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then ./configure && make ; fi

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
    - secure: "cxswz+gkMsA83PFQ5327J9aC0/U/cbu4Bu1BYtIT0GWxS71tbnHQPkP7cZSM5FeziZJYP+2rtKr+DSew8FYavTTXnG1zA3rIYxC2IWQl4t2+FyWvuiOXFbrrwptMQJ/rnFlB7t3X1OHrOSCvRtBZM8TqazDeI6L0OBbgt1zzjatosOjcAf6qtoU3FwPbWxQnKFD6Mx5hLnYGgyFsugxLX50st+qIEwNF4vOH+1lRjDeliHy2heU7/nYgzYkk8XkD10ilqOZrFNsd+Q2Qu9H+enjv+/0S4DyF7XUpHIt5qzqBCeyeTXdftknAUDY4ejhn9RNdhADUNR2kNBs3NDNd/el545fQaWmXc0yFV0hhXUSSeMBSOuaiRh52VFOlOaHpoEN/+xbMApbm2/s1SQzuU4Y0PGgUaQnczZzzI7T2upxnONZyVTiKST5CDDjUKzjHXIpN9RiWBWnFuBrpKxAbSDWGYrsZhFmZUj91TV/rr7oxRvd9trDX/Oy1oXQm1dPSW7Z8figFCnj7JlFgv6rucbuytdjy17N5vil96DIaVUUuKJTslHWKXTE91WwiZW4QXjUGoe/sJnSHIkxGlUkX4LL3cjkvszFw8j9KkLy8xsFXAzY1oRkv3F9p99IujQdom0opGizfP2X2T/oE4PtMsZX9vnupvddVwW6HHj9rdQI="

before_install:
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-
  - sudo apt-get -y install libprocps-dev
addons:
     apt:
        update: true

addons:
  coverity_scan:
    project:
      name: "rjaan/procps_ptree"
      description: "procps_ptree - shows inforamtion of executed process and task"
    notification_email: rjaan@yandex.ru
    build_command_prepend: "./configure"
    build_command: "make"
    branch_pattern: coverity_scan    

language: c

compiler: gcc

cache: ccache

os: linux

dist: boinic

#The COVERITY_SCAN_BRANCH environment variable will be set to 1 when the Coverity Scan addon is in operation.
script: if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then ./configure && make ; fi

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "Vd37292PjqOkSVX9u4LkOk4XnMqM8Wmi/tq8ulTdIOekiHwtX/eA+BO8jeCjXnPdqFt22/nP9onamkFTSZJJi8mES7//HjsdyTIJ+ToMvcSkmzjDFmhJuJG069+7nNJVQbvVfDnJwLqS1O3hpqtsILasZcQ7FxpDZj36Ckm8hSAZiLEPm4ZFa0hrE21/xueO5GH6maVT6f7MOsBJ0IdLg0QWDUw4vyKUXFBjgWiA2gGvBtsetBD94zeVj5aDDKpxblCvWt2d6l6DOHpkTI4u6uL5QX6Yn3IqXRZMVmrE0oC63f6nE2i5sws5z/CamH0jtkOR/J6RluGj9fiPFinRlO5qap86P93ha3DSlM8dDJrT0FEacPnwI83PBrdRCvu2bZtQeArWQEa7A4KX3qpZATRVwaq3eHbv+NQgmnmaeXdki3eNp4vxKVHRIoKWMjP50Xp89xuDeQQv3dlpQ1NrID7PlD3rMQrEJ4r4r6HZicIMYXtxyT2q9xVRROfY0YFGTLY2W+IJ2dlnRwQd1F/BF7Y7Zm654tgMoGWgmgJM3LxHKaX4n1QPGWJsq91abNwgFk1awOMPZ0VYd33C5c4Di94Utn6funFPmoSN5uUHnu+Ek+b0jtX9/pJpxS2GvhkJR9uS03ZYNlRHD9nOTOsJxg1KTKlc8G3BmV29VL79dPY="


before_install:
  - sudo apt-get -y install libprocps-dev
  - echo -n | openssl s_client -connect https://scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
    apt:
       update: true
    coverity_scan:
       project:
         name: "rjaan/procps_ptree"
         description: "procps_ptree - shows inforamtion of executed process and task"
       notification_email: rjaan@yandex.ru
       build_command_prepend: "./configure"
       build_command: "make"
       branch_pattern: coverity_scan

#eof
